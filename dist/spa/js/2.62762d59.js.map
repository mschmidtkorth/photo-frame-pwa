{"version":3,"sources":["webpack:///./src/layouts/MainLayout.vue?a757","webpack:///./src/layouts/MainLayout.vue?0f42","webpack:///src/layouts/MainLayout.vue","webpack:///./src/layouts/MainLayout.vue?2c2d","webpack:///./src/layouts/MainLayout.vue?f8b7","webpack:///./src/layouts/MainLayout.vue?2ff1"],"names":[],"mappings":";;;;;AAAA,uC;;;;;;;;;;;;ACAA,0BAA0B,aAAa,0BAA0B,wBAAwB,sBAAsB,OAAO,sBAAsB,iBAAiB,6CAA6C,eAAe,kBAAkB,wBAAwB,wBAAwB,oDAAoD,uCAAuC,aAAa,uBAAuB,mDAAmD,uBAAuB,oBAAoB,OAAO,8FAA8F,uCAAuC,0CAA0C,YAAY,+BAA+B,iBAAiB,2CAA2C,+BAA+B,sBAAsB,2BAA2B,uBAAuB,OAAO,sFAAsF,GAAG,YAAY,EAAE,2BAA2B,oBAAoB,6BAA6B,mCAAmC,KAAK,wBAAwB,cAAc,6BAA6B,qCAAqC,KAAK,yBAAyB,mCAAmC,cAAc,6BAA6B,qCAAqC,KAAK,uCAAuC,GAAG,YAAY,yBAAyB,wEAAwE,kCAAkC,yDAAyD,QAAQ,yCAAyC,YAAY,mBAAmB,oBAAoB,OAAO,4GAA4G,oBAAoB,OAAO,yEAAyE,oBAAoB,OAAO,4DAA4D,iCAAiC,wBAAwB;AACzhE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsFA;AAEA;AACA;AACA;AACA,oBADA;;AAEA;AACA;AACA,qBADA;AAEA,iCAFA;AAGA;AAHA;AAKA,GARA;;AASA;AACA;AACA,wCADA,CAGA;;AACA,8BAJA,CAKA;;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA,OAPA;AAQA,KAfA;;AAgBA;AACA;AACA;AACA,KAnBA;;AAoBA;AACA;AACA;AAAA;AAAA;AACA;;AACA;AACA;;AAzBA,GATA;;AAoCA;AACA;AACA,GAtCA;;AAuCA;AACA;AAEA;AACA;AACA;AACA,KAHA,EAGA,OAHA;;AAIA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,OAFA,CAEA;AACA;AACA;;AACA,UACA,0BACA,2CAFA,EAGA;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA,gDADA,CAEA;;AACA,2BAHA,CAIA;;AACA;AACA,kCANA,CAQA;;AACA;AACA;AACA,SAFA,EAEA,IAFA;AAGA,OAZA;AAaA;AACA;;AAnFA,G;;AC3FgV,CAAgB,iHAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA3Q;AAC3B;AACL;AACc;;;AAGvE;AAC0F;AAC1F,gBAAgB,8CAAU;AAC1B,EAAE,0CAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,iGAAiB;AAC8B;AACA;AACG;AACU;AACb;AACA;AACA;AACT;AACG;AACQ;AACU;AACe;AACzF,6BAAQ,2BAA2B,mCAAO,CAAC,mCAAO,CAAC,qCAAQ,CAAC,+CAAa,CAAC,mCAAO,CAAC,mCAAO,CAAC,mCAAO,CAAC,6BAAI,CAAC,+BAAK,CAAC,uCAAS,CAAC,iDAAc,CAAC;;;;;;;;;AChCtI;AAAA;AAAA","file":"js/2.62762d59.js","sourcesContent":["// extracted by mini-css-extract-plugin","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-layout',{attrs:{\"view\":\"lHh Lpr lFf\"}},[_c('q-header',{staticClass:\"bg-primary text-grey-10\",attrs:{\"bordered\":\"\"}},[_c('q-toolbar',{staticClass:\"constrain\"},[_c('q-toolbar-title',{staticClass:\"text-bold text-fredoka-one text-white\"},[_vm._v(\"\\n        Photo\"),_c('span',{staticStyle:{\"font-style\":\"italic\"}},[_vm._v(\"Ahhhhhttttt\")])])],1)],1),_c('q-footer',{staticClass:\"bg-white\"},[[_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated bounceIn\",\"leave-active-class\":\"animated fadeOut\"}},[(_vm.showAppInstallBanner)?_c('div',{staticClass:\"banner-container bg-primary\"},[_c('div',{staticClass:\"constrain-banner\"},[_c('q-banner',{staticClass:\"bg-primary text-white\",attrs:{\"dense\":\"\",\"inline-actions\":\"\"},scopedSlots:_vm._u([{key:\"avatar\",fn:function(){return [_c('q-avatar',{attrs:{\"name\":\"signal_wifi_off\",\"color\":\"primary\",\"icon\":\"system_update\",\"font-size\":\"22px\"}})]},proxy:true},{key:\"action\",fn:function(){return [_c('q-btn',{staticClass:\"q-px-sm\",attrs:{\"dense\":\"\",\"flat\":\"\",\"label\":\"Yes\"},on:{\"click\":_vm.installApp}}),_c('q-btn',{staticClass:\"q-px-sm\",attrs:{\"dense\":\"\",\"flat\":\"\",\"label\":\"Later\"},on:{\"click\":function($event){_vm.showAppInstallBanner = false}}}),_c('q-btn',{staticClass:\"q-px-sm\",attrs:{\"dense\":\"\",\"flat\":\"\",\"label\":\"Never\"},on:{\"click\":_vm.neverShowAppInstallBanner}})]},proxy:true}],null,false,2734498194)},[_c('b',[_vm._v(\"Install PhotoAh?\")])])],1)]):_vm._e()])],_c('q-tabs',{staticClass:\"text-grey-10\",attrs:{\"active-color\":\"primary\",\"indicator-color\":\"transparent\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('q-route-tab',{attrs:{\"to\":\"/\",\"name\":\"slideshow\",\"icon\":\"panorama\",\"label\":\"Slideshow\",\"disable\":_vm.$store.images.length === 0}}),_c('q-route-tab',{attrs:{\"to\":\"/settings\",\"name\":\"settings\",\"icon\":\"settings\",\"label\":\"Settings\"}}),_c('q-route-tab',{attrs:{\"to\":\"/help\",\"name\":\"help\",\"icon\":\"support\",\"label\":\"Help\"}})],1)],2),_c('q-page-container',{staticClass:\"bg-grey-1\"},[_c('router-view')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <q-layout view=\"lHh Lpr lFf\">\r\n    <q-header class=\"bg-primary text-grey-10\" bordered>\r\n      <q-toolbar class=\"constrain\">\r\n        <q-toolbar-title class=\"text-bold text-fredoka-one text-white\">\r\n          Photo<span style=\"font-style: italic;\">Ahhhhhttttt</span>\r\n        </q-toolbar-title>\r\n      </q-toolbar>\r\n    </q-header>\r\n    <q-footer class=\"bg-white\">\r\n      <template>\r\n        <transition\r\n          appear\r\n          enter-active-class=\"animated bounceIn\"\r\n          leave-active-class=\"animated fadeOut\"\r\n        >\r\n          <div v-if=\"showAppInstallBanner\" class=\"banner-container bg-primary\">\r\n            <div class=\"constrain-banner\">\r\n              <q-banner dense inline-actions class=\"bg-primary text-white\">\r\n                <template v-slot:avatar>\r\n                  <q-avatar\r\n                    name=\"signal_wifi_off\"\r\n                    color=\"primary\"\r\n                    icon=\"system_update\"\r\n                    font-size=\"22px\"\r\n                  />\r\n                </template>\r\n                <b>Install PhotoAh?</b>\r\n                <template v-slot:action>\r\n                  <q-btn\r\n                    dense\r\n                    flat\r\n                    label=\"Yes\"\r\n                    class=\"q-px-sm\"\r\n                    @click=\"installApp\"\r\n                  />\r\n                  <q-btn\r\n                    dense\r\n                    flat\r\n                    @click=\"showAppInstallBanner = false\"\r\n                    label=\"Later\"\r\n                    class=\"q-px-sm\"\r\n                  />\r\n                  <q-btn\r\n                    dense\r\n                    flat\r\n                    label=\"Never\"\r\n                    class=\"q-px-sm\"\r\n                    @click=\"neverShowAppInstallBanner\"\r\n                  />\r\n                </template>\r\n              </q-banner>\r\n            </div>\r\n          </div>\r\n        </transition>\r\n      </template>\r\n\r\n      <q-tabs\r\n        v-model=\"tab\"\r\n        class=\"text-grey-10\"\r\n        active-color=\"primary\"\r\n        indicator-color=\"transparent\"\r\n      >\r\n        <q-route-tab\r\n          to=\"/\"\r\n          name=\"slideshow\"\r\n          icon=\"panorama\"\r\n          label=\"Slideshow\"\r\n          :disable=\"$store.images.length === 0\"\r\n        />\r\n        <q-route-tab\r\n          to=\"/settings\"\r\n          name=\"settings\"\r\n          icon=\"settings\"\r\n          label=\"Settings\"\r\n        />\r\n        <q-route-tab to=\"/help\" name=\"help\" icon=\"support\" label=\"Help\" />\r\n      </q-tabs>\r\n    </q-footer>\r\n\r\n    <q-page-container class=\"bg-grey-1\">\r\n      <router-view />\r\n    </q-page-container>\r\n  </q-layout>\r\n</template>\r\n\r\n<script>\r\nimport { store } from '../boot/store'\r\n\r\nlet deferredPrompt\r\nlet bannerHasBeenShown = false\r\nexport default {\r\n  name: 'MainLayout',\r\n  data () {\r\n    return {\r\n      tab: 'settings',\r\n      showAppInstallBanner: false,\r\n      $store: store\r\n    }\r\n  },\r\n  methods: {\r\n    installApp () {\r\n      this.showAppInstallBanner = false\r\n\r\n      // Show the install prompt\r\n      deferredPrompt.prompt()\r\n      // Wait for the user to respond to the prompt\r\n      deferredPrompt.userChoice.then(choiceResult => {\r\n        if (choiceResult.outcome === 'accepted') {\r\n          console.log('User accepted the install prompt')\r\n          this.neverShowAppInstallBanner()\r\n        } else {\r\n          console.log('User dismissed the install prompt')\r\n        }\r\n      })\r\n    },\r\n    neverShowAppInstallBanner () {\r\n      this.showAppInstallBanner = false\r\n      this.$q.localStorage.set('neverShowInstall', true)\r\n    },\r\n    albumMissingCb () {\r\n      if (this.$router.currentRoute.name !== 'Settings') {\r\n        this.$router.push({ name: 'Settings' })\r\n      }\r\n      this.$q.loading.hide()\r\n    }\r\n  },\r\n  created () {\r\n    this.$actions.albumMissingCb = this.albumMissingCb\r\n  },\r\n  async mounted () {\r\n    // Object.defineProperty(navigator, 'onLine', { value: false })\r\n\r\n    this.interval = setInterval(async () => {\r\n      // call _loadimages every 30 minutes\r\n      await this.$actions.loadImages(false)\r\n    }, 1800000)\r\n    if (!this.$store.authReady || this.$store.images.length === 0) {\r\n      // check for valid api key, if not try to load from url\r\n      if (!this.$store.validApikey()) {\r\n        var urlParams = new URLSearchParams(window.location.search)\r\n        if (urlParams.has('apikey')) {\r\n          this.$actions.setApikey(urlParams.get('apikey'))\r\n          window.location.replace(window.location.origin)\r\n        }\r\n      }\r\n      try {\r\n        await this.$gAuth.initClient()\r\n      } catch (e) {\r\n        console.log('error: ' + e.message)\r\n      }\r\n      if (\r\n        !this.$store.authReady ||\r\n        (!this.$store.isSignedIn && navigator.onLine)\r\n      ) {\r\n        this.albumMissingCb()\r\n      }\r\n    }\r\n    const neverShowInstall = this.$q.localStorage.getItem('neverShowInstall')\r\n    if (!neverShowInstall) {\r\n      window.addEventListener('beforeinstallprompt', e => {\r\n        if (bannerHasBeenShown === true) return\r\n        // Prevent the mini-infobar from appearing on mobile\r\n        e.preventDefault()\r\n        // Stash the event so it can be triggered later.\r\n        deferredPrompt = e\r\n        bannerHasBeenShown = true\r\n\r\n        // Update UI notify the user they can install the PWA\r\n        setTimeout(() => {\r\n          this.showAppInstallBanner = true\r\n        }, 3000)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"sass\">\r\n.q-toolbar__title\r\n  text-align: center\r\n  font-size: 30px\r\n</style>\r\n","import mod from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MainLayout.vue?vue&type=template&id=362eea5b&\"\nimport script from \"./MainLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./MainLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MainLayout.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QHeader from 'quasar/src/components/header/QHeader.js';\nimport QToolbar from 'quasar/src/components/toolbar/QToolbar.js';\nimport QToolbarTitle from 'quasar/src/components/toolbar/QToolbarTitle.js';\nimport QFooter from 'quasar/src/components/footer/QFooter.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport QAvatar from 'quasar/src/components/avatar/QAvatar.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QTabs from 'quasar/src/components/tabs/QTabs.js';\nimport QRouteTab from 'quasar/src/components/tabs/QRouteTab.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport qInstall from \"../../node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\";\nqInstall(component, 'components', {QLayout,QHeader,QToolbar,QToolbarTitle,QFooter,QBanner,QAvatar,QBtn,QTabs,QRouteTab,QPageContainer});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-2-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-2-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-2-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-2-3!../../node_modules/@quasar/app/lib/webpack/loader.quasar-sass-variables.js!../../node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MainLayout.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}